<?php	 if ($this->user->role->code == 'member' || !count($model->payments)) : ?> 
	     <div class="panel panel-info">
		 <div class="panel-heading">Information</div>
		 <div class="panel-body">There is no payment to display.</div>
	     </div>
<?php    else : ?>
	    <table class="table">
	        <thead>
		  <tr>
		    <th>Status</th>
		    <th>Mode</th>
		    <th>Amount</th>
		    <th>Date</th>
		    <th>Item</th>
		    <th></th>
		  </tr>
	        </thead>
<?php           foreach ($model->payments as $payment) : ?>	
		  <tr>
		    <td>
		      <?php $disabled = ($payment->status != 'pending') ? 'disabled' : ''; ?>
			  <select name="_payment_status" id="payment-status" <?php echo $disabled; ?> class="form-control">
			    <option value="pending" selected="selected">Pending</option>
			    <option value="completed">Completed</option>
			    <option value="canceled">Canceled</option>
			  </select>
			  <input type="hidden" name="_payment_id" value="<?php echo $payment->id; ?>">
		    </td>
		    <td>
		      <?php echo $payment->mode; ?>
		    </td>
		    <td>
		      <?php echo $payment->amount; ?>
		    </td>
		    <td>
		      <?php echo $payment->created_at; ?>
		    </td>
		    <td>
		      <?php echo $payment->item; ?>
		    </td>
		    <td>
		      <?php if ($payment->status == 'pending') : ?>
		        <div id="save-payment-button">
			  <button
			      type="button"
			      id="btn-save-payment"
			      data-request="onSavePayment"
			      data-browser-validate
			      data-request-data="close:1"
			      data-request-success="$.fn.checkPaymentStatus();"
			      class="btn btn-default">
			      Save
			  </button>
			</div>
		      <?php endif; ?>
		    </td>
		  </tr>
<?php           endforeach; ?>
	    </table>
<?php    endif; ?>	
